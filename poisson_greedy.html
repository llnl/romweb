<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="/img/favicon.ico">
        <meta name="keywords" content="Finite Element Library,Finite Element Code,Finite Element Method Library,Finite Element Method Code,Finite Element C++,Finite Element Method C++,Finite Element Library C++,Finite Element Code C++,FEM Code,FEM Library,FEM C++">
        <meta name="google-site-verification" content="45K56TawSdzbgy-uDtfJdYwp7zaVdL3fIAGYt869wwU" />
<!--	<title></title>  -->
        <title>libROM - Data-driven Modeling Library</title>

        <link href="./css/bootstrap-mfem.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="./css/highlight.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://www.librom.net/">libROM</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="features.html">Features</a>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="foundation_models.html">DDFEM</a>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="examples.html">Examples</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="scaleup.html">ScaleupROM</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                    
                        
                            <li >
                                 <a href="building.html">Building libROM</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="poisson.html">Poisson equation</a>
                            </li>
                        
                    
                        
                            <li class="active">
                                 <a href="poisson_greedy.html">Greedy for Poisson</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="publications.html">Publications</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="about.html">About</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="gallery.html">Gallery</a>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="download.html">Download</a>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="ddps.html">DDPS</a>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="hlcs.html">HLCS</a>
                </li>
            
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                
                <li>
                    <a href="https://github.com/LLNL/libROM">
                        
                            <i class="fa fa-github-square"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
            <div class="col-md-3 visible-xs visible-sm"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#greedy-for-poisson-equation">Greedy for Poisson equation</a></li>
        
    
    </ul>
</div></div> <!-- toc on top on mobile -->
            <div class="col-md-9" role="main">

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']]}});
</script>
<script type="text/javascript"
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<h1 id="greedy-for-poisson-equation">Greedy for Poisson equation</h1>
<p>The main code for this tutorial can be found at
<a href="https://github.com/LLNL/libROM/blob/master/examples/prom/poisson_local_rom_greedy.cpp">poisson_local_rom_greedy.cpp</a>,
which demonstrates how to use libROM to execute greedy procedure for the ROM of
the Poisson problem introduced in the <a href="poisson.html">Poisson equation tutorial</a>.
For the recap, the general procedure of the greedy algorithm follows:</p>
<ol>
<li>Define a parameter space </li>
<li>Pick an initial point in the parameter space to build a ROM there (a good
     cancidiate initla point is either the centroid or one of end points)</li>
<li>Evaluate <em>error indicator</em> of the current ROM (either global or local ROM)
     at $N$ random points within the parameter space</li>
<li>Check if the maximum error indicator value is less than the desirable
     accuracy threshold</li>
<li>If the answer to Step 4 is yes, then <em>terminate</em> the greedy process.</li>
<li>If the answer to Step 4 is no, then collect the full order model
     simulation data at the maximum error indicator point and add them to
     update the ROM</li>
<li>Go to Step 3. </li>
</ol>
<p>As in the <a href="poisson.html">Poisson equation tutorial</a>, we choose to vary the
frequency $\kappa$ as parameter. First, we define the parameter space to be
from $0.5$ to $3$, which is larger than the one used in <a href="poisson.html">Poisson equation
tutorial</a>. You can try the following command line options to run
the greedy procedure:</p>
<pre><code class="language-sh">./poisson_local_rom_greedy -build_database -greedy-param-min 0.5 -greedy-param-max 3 -greedy-param-size 40 -greedysubsize 10 -greedyconvsize 20 -greedyrelerrortol 0.01
</code></pre>
<p>The lower and upper bounds of the parameter are determined by the options,
<em>-greedy-param-min</em> and <em>-greedy-param-max</em>, respectively. The option
<em>-greedy-param-size</em> specifies the total number of random sample points within
the parameter space for the whole greedy procedure.  The option
<em>-greedysubsize</em> sets the number of sub-sample points, where the error
indicator is evaluated at every greedy iterations.  The option
<em>-greedyconvsize</em> sets the number of convergence-sample points on which the
error indicator is checked and the termination of the greedy algorithm is
determined if the error indicators are below the convergence threshold after
the error indicator tests on the sub-sample points have been passed.  Finally,
<em>-greedyrelerrortol</em> sets the desirable relative error for the greedy algorithm
to achieve.</p>
<p>The core class of the libROM for the greedy procedure is <a href="https://librom.readthedocs.io/en/latest/class_c_a_r_o_m_1_1_greedy_sampler.html">
GreedySampler</a>,
which is defined on Line 126 of <a href="https://github.com/LLNL/libROM/blob/master/examples/prom/poisson_local_rom_greedy.cpp">poisson_local_rom_greedy.cpp</a>
The GreedySampler generates sampling points within a given
parameter space. 
The class has two sub-classes, i.e.,
<a href="https://librom.readthedocs.io/en/latest/class_c_a_r_o_m_1_1_greedy_custom_sampler.html">GreedyCustomSampler</a>
and
<a href="https://librom.readthedocs.io/en/latest/class_c_a_r_o_m_1_1_greedy_random_sampler.html">GreedyRandomSampler</a>.
The GreedyCustomSampler generates <em>pre-defined</em> sampling
points, e.g., a tensor product sampling points, while the
GreedyRandomSampler generates <em>random</em> sampling points, e.g.,
Latin hyper-cube sampling points. The GreedySampler also does
book-keeping job of at which sampling point to evaluate the error indicator,
when to move onto the next greedy step, and which sampling point has the
maximum error indicator value. </p>
<p>Just to be clear, the libROM does not do everything for you.  For example, the
error indicator must be defined in the physics solver. For the Poisson example,
the residual-based error indicator is defined at Lines
529-535 of <a href="https://github.com/LLNL/libROM/blob/master/examples/prom/poisson_local_rom_greedy.cpp">poisson_loca_rom_greedy.cpp</a>. </p>
<p>Once the greedy procedure completes, the log file, called
<em>poisson_greedy_algorithm_log.txt</em>, is generated to show the progress of the
greedy procedure and the final parameter points on which the global ROM was
built. For example, you will see the following block at the end of the file,
indicating the final parameter points on which the <em>global</em> ROM is built.</p>
<pre><code class="language-sh">Sampled Parameter Points
[ 0.591166 ]
[ 0.844964 ]
[ 1.066678 ]
[ 1.353370 ]
[ 1.710334 ]
[ 1.992794 ]
[ 2.568171 ]
[ 2.985638 ]
</code></pre>
<p>Because we set the <em>-greedyrelerrortol</em> to be 0.01, the <em>global</em> ROM built
through the greedy procedure must be able to predict a solution with a relative
error less than 1$\%$ for any points in the parameter space. Indeed, let's try
to predict the solution at $\kappa = 2.2$, which was not one of the final
parameter points. Let's first generate the full order model solution with the
following command line option:</p>
<pre><code class="language-sh">./poisson_local_rom_greedy -offline -f 2.2
</code></pre>
<p>This full order model solution will be used to compute the relative error for
the ROM solution. The ROM solution can be obtained by the following command
line option:</p>
<pre><code class="language-sh">./poisson_local_rom_greedy -use_database -online -f 2.2
</code></pre>
<p>Indeed, the relative error of 0.00167671 is achieved </p></div>
            <div class="col-md-3 hidden-xs hidden-sm"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#greedy-for-poisson-equation">Greedy for Poisson equation</a></li>
        
    
    </ul>
</div></div>

            
        </div>

        <footer class="footer">
           <div class="container">
              <p class="text-muted alignright">LLNL-WEB-827021</p>
              <p class="text-muted alignleft">
                  Developed by the <a href="/about.html">ROM team</a> at
                  <a href="http://computation.llnl.gov/casc/">CASC</a>,
                  <a href="https://www.llnl.gov/">LLNL</a>, and based on 
                  <a href="https://mfem.org/">MFEM</a> webpage template.</p>
           </div>
        </footer>

        <script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script src="./js/base.js"></script>
        <script src="./js/retina.min.js"></script>
        <script src="search/main.js"></script>
    </body>
</html>